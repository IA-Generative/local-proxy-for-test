# tinyproxy.conf — configuration minimale pour un proxy local avec BasicAuth obligatoire
#
# Important :
# - Si au moins une ligne BasicAuth est présente, l'accès est accordé uniquement
#   aux utilisateurs authentifiés (Proxy-Authorization: Basic ...).
# - Port interne du conteneur : 3128 (mappé en 3128 sur l'hôte via docker-compose)

User tinyproxy
Group tinyproxy

Port 3128
Listen 0.0.0.0

Timeout 600
DefaultErrorFile "/usr/share/tinyproxy/default.html"
LogFile "/var/log/tinyproxy/tinyproxy.log"
LogLevel Info

# Autoriser les clients (le conteneur verra typiquement l'hôte via la passerelle Docker)
Allow 0.0.0.0/0
Allow ::/0

# Auth Basic obligatoire
BasicAuth login1234 passwd1234

# Durcissement léger
DisableViaHeader Yes
# Ne pas mettre de page de stats
# StatHost "tinyproxy.stats"
